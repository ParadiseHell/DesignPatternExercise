package com.chengtao.iterator;

import java.util.Iterator;
import java.util.LinkedList;
import java.util.Queue;

import com.chengtao.entity.ChinaNode;

/**
 * 组合模式迭代器
 * @author ChengTao
 *
 */
public class CompositeIterator implements Iterator<ChinaNode>{
	
	private Queue<Iterator<ChinaNode>> queue = new LinkedList<>();
	
	public CompositeIterator(Iterator<ChinaNode> iterator) {
		queue.offer(iterator);
	}

	@Override
	public boolean hasNext() {
		if (queue.isEmpty()) {
			return false;
		}
		if (!queue.contains(queue.peek().next().getIterator())) {
			queue.offer(queue.peek().next().getIterator());
		}
		
		Iterator<ChinaNode> iterator = queue.peek();
		if (!iterator.hasNext()) {
			queue.poll();
			return hasNext();
		}else {
			return true;
		}
	}

	@Override
	public ChinaNode next() {
		return queue.peek().next();
	}
}
